%new commands
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\ELE}{\mathcal{L}}
\newcommand{\ENE}{\mathcal{N}}
%this command puts in the line below the header
\newcommand{\insertidentifiers}{%
    \vspace*{70pt}%
    \noindent%
    \Large{\textbf{\textit{Name:} \name}\rule{9cm}{1.5pt}\Large{\textbf{}\rule{1.5cm}{1.5pt}}} \Large{\textbf{\textit{Date:}}\today} \\
        {\Large{\textbf{\textit{ \myauthor \ifthenelse{\equal{\mycoauthor}{}}{}{/}}\mycoauthor}} \\ }
        }
%this command will create the criteria boxes to put the grades
\newcommand{\criteria}[5][1]{
    \ifthenelse{#1=1}{
    \begin{tabular}{|>{\bfseries\centering\arraybackslash}m{4.5cm}|}\hline
         #2 \\ \hline
         \rule{0pt}{4\baselineskip} \\ \hline
    \end{tabular}}{
        \ifthenelse{#1=2}{
        \begin{tabular}{|*{#1}{>{\bfseries\centering\arraybackslash}m{4.5cm}|}}\hline
           #2  & #3 \\ \hline
           \rule{0pt}{4\baselineskip} & \\ \hline
        \end{tabular}}{
            \ifthenelse{#1=3}{
            \begin{tabular}{|*{#1}{>{\bfseries\centering\arraybackslash}m{4.5cm}|}}\hline
                #2 & #3 & #4 \\ \hline
                \rule{0pt}{4\baselineskip} & & \\ \hline
            \end{tabular}}{
                \begin{tabular}{|*{#1}{>{\bfseries\centering\arraybackslash}m{4.5cm}|}}\hline
                    #2 & #3 & #4 & #5 \\ \hline
                    \rule{0pt}{4\baselineskip} & & & \\ \hline
                \end{tabular}}
            }
        }
    }
%These are the commands and environments for the questions
\newcounter{question}
\newcounter{subquestions}[question]
\newcommand{\qmarks}[1]{\textbf{(#1 mark\ifthenelse{#1=1}{}{s})}}
\newcommand{\answerbox}[2]{
    \noindent
    \fbox{\begin{minipage}{\linewidth}
        		\normalsize{Working:} \vspace*{#1}\\
        		\ifthenelse{#2=0}{\end{minipage}}{        		    \rule{0.49\linewidth}{0pt}
        		    \fbox{\begin{minipage}[b]{0.5\linewidth}
        		    \begin{enumerate}[(a)]
        		        \whiledo{\value{subquestions}<#2}{\item \dotfill \stepcounter{subquestions}}
        		    \end{enumerate}
        		    \end{minipage}}
        		    \end{minipage}}
        		    }
    }
\newenvironment{question}[4][abox false]{%
    \noindent%
    \refstepcounter{question}%
    \newcommand{\subpoints}{#3}%
    \newcommand\totalmarks{#2}%
    \newcommand\iftruebox{#1}%
    \newcommand\boxsize{#4}%
    \thequestion. }%
    {\par \noindent \hspace*{16cm}\textbf{[Total marks: \totalmarks{}]}\\
    \ifthenelse{\equal{\iftruebox}{abox true}}{\answerbox{\boxsize}{\subpoints}\par}{}
    }%
%pagestyle margins headers and footers
\usepackage[includehead,includefoot]{geometry}
\geometry{top=.1cm,inner=1cm,outer=.8cm,bottom=.7mm}
\usepackage{pgf}%beginning of arguments for margin
\usepackage{pgfpages}

\pgfpagesdeclarelayout{boxed}
{
  \edef\pgfpageoptionborder{0pt}
}
{
  \pgfpagesphysicalpageoptions
  {%
    logical pages=1,%
  }
  \pgfpageslogicalpageoptions{1}
  {
    border code=\pgfsetlinewidth{0.5pt}\pgfstroke,%
    border shrink=\pgfpageoptionborder,%
    resized width=.95\pgfphysicalwidth,%
    resized height=.95\pgfphysicalheight,%
    center=\pgfpoint{.5\pgfphysicalwidth}{.5\pgfphysicalheight}%
  }%
}

\pgfpagesuselayout{boxed}%end of arguments for margins
\usepackage{fancyhdr}%beginning of arguments for header and footer
\fancypagestyle{firststyle}
{
	\fancyhf{}
	\fancyhead[C]{\huge{\textbf{\myinstitute}} \\ \huge{\textbf{\mydepartment}} \\ \huge{\textbf{\thisterm}} \huge{\textbf{\thisevaluation}}\\}
	\fancyhead[L]{\includegraphics[width=38mm,keepaspectratio]{CodeToGiveApp/latex/logo.png}}
    \fancyhead[R]{}\\}

    \renewcommand\headrule{\rule{\linewidth}{0.3pt}}
}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{}
\renewcommand\headrule{}
\fancyhead[C]{}
\fancyhead[R]{}
\fancyfoot[L]{\scriptsize \myauthor/\copies\ copias/tiro y retiro/\today}
\fancyfoot[R]{}
\fancyfoot[C]{\thepage}% end of arguments for headers and footers